{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adityapethe/Developer/ui-chat/ui-chat/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/adityapethe/Developer/ui-chat/ui-chat/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/adityapethe/Developer/ui-chat/ui-chat/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/adityapethe/Developer/ui-chat/ui-chat/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import\"./chatbotui.css\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPaperPlane}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chatbot=function Chatbot(_ref){var fetchAndUpdateCode=_ref.fetchAndUpdateCode;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var handleInputChange=function handleInputChange(event){setInput(event.target.value);};var handleSendMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userMessage,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(input.trim()!==\"\")){_context.next=12;break;}userMessage={sender:\"user\",text:input.trim()};// Add : Message here\nsetMessages([].concat(_toConsumableArray(messages),[userMessage]));setInput(\"\");_context.next=6;return fetch(\"/chat\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:userMessage.text})});case 6:response=_context.sent;_context.next=9;return response.json();case 9:data=_context.sent;// After the response from the server is received, add the bot's message\nsetMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[{sender:\"bot\",text:data.message}]);});fetchAndUpdateCode();case 12:case\"end\":return _context.stop();}},_callee);}));return function handleSendMessage(){return _ref2.apply(this,arguments);};}();// You no longer need to add the bot's message in this useEffect hook\nuseEffect(function(){},[messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chatbot-container\",children:[messages.map(function(message,index){return/*#__PURE__*/_jsx(\"div\",{className:message.sender===\"user\"?\"userMessage\":\"botMessage\",children:message.text},index);}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:input,onChange:handleInputChange,className:\"input-field\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPaperPlane,size:\"lg\"})})]})]});};export default Chatbot;","map":{"version":3,"names":["useEffect","useState","FontAwesomeIcon","faPaperPlane","jsx","_jsx","jsxs","_jsxs","Chatbot","_ref","fetchAndUpdateCode","_useState","_useState2","_slicedToArray","input","setInput","_useState3","_useState4","messages","setMessages","handleInputChange","event","target","value","handleSendMessage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userMessage","response","data","wrap","_callee$","_context","prev","next","trim","sender","text","concat","_toConsumableArray","fetch","method","headers","body","JSON","stringify","message","sent","json","prevMessages","stop","apply","arguments","className","children","map","index","onChange","onClick","icon","size"],"sources":["/Users/adityapethe/Developer/ui-chat/ui-chat/client/src/components/chatbotui.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./chatbotui.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons\";\n\ninterface Message {\n  sender: \"user\" | \"bot\";\n  text: string;\n}\n\ninterface ChatbotUIProps {\n  fetchAndUpdateCode: () => void;\n}\n\nconst Chatbot: React.FC<ChatbotUIProps> = ({ fetchAndUpdateCode }) => {\n  const [input, setInput] = useState(\"\");\n  const [messages, setMessages] = useState<Message[]>([]);\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setInput(event.target.value);\n  };\n\n  const handleSendMessage = async () => {\n    if (input.trim() !== \"\") {\n      const userMessage: Message = { sender: \"user\", text: input.trim() }; // Add : Message here\n      setMessages([...messages, userMessage]);\n      setInput(\"\");\n\n      const response = await fetch(\"/chat\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ message: userMessage.text }),\n      });\n\n      const data = await response.json();\n\n      // After the response from the server is received, add the bot's message\n      setMessages((prevMessages) => [\n        ...prevMessages,\n        { sender: \"bot\", text: data.message } as Message,\n      ]);\n\n      fetchAndUpdateCode();\n    }\n  };\n\n  // You no longer need to add the bot's message in this useEffect hook\n  useEffect(() => {}, [messages]);\n\n  return (\n    <div className=\"chatbot-container\">\n      {messages.map((message, index) => (\n        <div\n          key={index}\n          className={message.sender === \"user\" ? \"userMessage\" : \"botMessage\"}\n        >\n          {message.text}\n        </div>\n      ))}\n      <div className=\"input-area\">\n        <textarea\n          value={input}\n          onChange={handleInputChange}\n          className=\"input-field\"\n        />\n        <button onClick={handleSendMessage}>\n          <FontAwesomeIcon icon={faPaperPlane} size=\"lg\" />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Chatbot;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}