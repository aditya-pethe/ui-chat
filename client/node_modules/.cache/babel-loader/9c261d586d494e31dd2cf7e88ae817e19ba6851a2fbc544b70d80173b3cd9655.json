{"ast":null,"code":"import _toConsumableArray from \"/Users/adityapethe/Developer/ui-chat/ui-chat/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/adityapethe/Developer/ui-chat/ui-chat/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { useEffect, useState } from 'react';\nimport { Annotation, EditorState, StateEffect } from '@codemirror/state';\nimport { EditorView } from '@codemirror/view';\nimport { getDefaultExtensions } from './getDefaultExtensions';\nimport { getStatistics } from './utils';\nvar External = Annotation.define();\nexport function useCodeMirror(props) {\n  var value = props.value,\n    selection = props.selection,\n    onChange = props.onChange,\n    onStatistics = props.onStatistics,\n    onCreateEditor = props.onCreateEditor,\n    onUpdate = props.onUpdate,\n    _props$extensions = props.extensions,\n    extensions = _props$extensions === void 0 ? [] : _props$extensions,\n    autoFocus = props.autoFocus,\n    _props$theme = props.theme,\n    theme = _props$theme === void 0 ? 'light' : _props$theme,\n    _props$height = props.height,\n    height = _props$height === void 0 ? '' : _props$height,\n    _props$minHeight = props.minHeight,\n    minHeight = _props$minHeight === void 0 ? '' : _props$minHeight,\n    _props$maxHeight = props.maxHeight,\n    maxHeight = _props$maxHeight === void 0 ? '' : _props$maxHeight,\n    _props$placeholder = props.placeholder,\n    placeholderStr = _props$placeholder === void 0 ? '' : _props$placeholder,\n    _props$width = props.width,\n    width = _props$width === void 0 ? '' : _props$width,\n    _props$minWidth = props.minWidth,\n    minWidth = _props$minWidth === void 0 ? '' : _props$minWidth,\n    _props$maxWidth = props.maxWidth,\n    maxWidth = _props$maxWidth === void 0 ? '' : _props$maxWidth,\n    _props$editable = props.editable,\n    editable = _props$editable === void 0 ? true : _props$editable,\n    _props$readOnly = props.readOnly,\n    readOnly = _props$readOnly === void 0 ? false : _props$readOnly,\n    _props$indentWithTab = props.indentWithTab,\n    defaultIndentWithTab = _props$indentWithTab === void 0 ? true : _props$indentWithTab,\n    _props$basicSetup = props.basicSetup,\n    defaultBasicSetup = _props$basicSetup === void 0 ? true : _props$basicSetup,\n    root = props.root,\n    initialState = props.initialState;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    container = _useState2[0],\n    setContainer = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    view = _useState4[0],\n    setView = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    state = _useState6[0],\n    setState = _useState6[1];\n  var defaultThemeOption = EditorView.theme({\n    '&': {\n      height: height,\n      minHeight: minHeight,\n      maxHeight: maxHeight,\n      width: width,\n      minWidth: minWidth,\n      maxWidth: maxWidth\n    }\n  });\n  var updateListener = EditorView.updateListener.of(function (vu) {\n    if (vu.docChanged && typeof onChange === 'function' &&\n    // Fix echoing of the remote changes:\n    // If transaction is market as remote we don't have to call `onChange` handler again\n    !vu.transactions.some(function (tr) {\n      return tr.annotation(External);\n    })) {\n      var doc = vu.state.doc;\n      var _value = doc.toString();\n      onChange(_value, vu);\n    }\n    onStatistics && onStatistics(getStatistics(vu));\n  });\n  var defaultExtensions = getDefaultExtensions({\n    theme: theme,\n    editable: editable,\n    readOnly: readOnly,\n    placeholder: placeholderStr,\n    indentWithTab: defaultIndentWithTab,\n    basicSetup: defaultBasicSetup\n  });\n  var getExtensions = [updateListener, defaultThemeOption].concat(_toConsumableArray(defaultExtensions));\n  if (onUpdate && typeof onUpdate === 'function') {\n    getExtensions.push(EditorView.updateListener.of(onUpdate));\n  }\n  getExtensions = getExtensions.concat(extensions);\n  useEffect(function () {\n    if (container && !state) {\n      var config = {\n        doc: value,\n        selection: selection,\n        extensions: getExtensions\n      };\n      var stateCurrent = initialState ? EditorState.fromJSON(initialState.json, config, initialState.fields) : EditorState.create(config);\n      setState(stateCurrent);\n      if (!view) {\n        var viewCurrent = new EditorView({\n          state: stateCurrent,\n          parent: container,\n          root: root\n        });\n        setView(viewCurrent);\n        onCreateEditor && onCreateEditor(viewCurrent, stateCurrent);\n      }\n    }\n    return function () {\n      if (view) {\n        setState(undefined);\n        setView(undefined);\n      }\n    };\n  }, [container, state]);\n  useEffect(function () {\n    return setContainer(props.container);\n  }, [props.container]);\n  useEffect(function () {\n    return function () {\n      if (view) {\n        view.destroy();\n        setView(undefined);\n      }\n    };\n  }, [view]);\n  useEffect(function () {\n    if (autoFocus && view) {\n      view.focus();\n    }\n  }, [autoFocus, view]);\n  useEffect(function () {\n    if (view) {\n      view.dispatch({\n        effects: StateEffect.reconfigure.of(getExtensions)\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [theme, extensions, height, minHeight, maxHeight, width, minWidth, maxWidth, placeholderStr, editable, readOnly, defaultIndentWithTab, defaultBasicSetup, onChange, onUpdate]);\n  useEffect(function () {\n    if (value === undefined) {\n      return;\n    }\n    var currentValue = view ? view.state.doc.toString() : '';\n    if (view && value !== currentValue) {\n      view.dispatch({\n        changes: {\n          from: 0,\n          to: currentValue.length,\n          insert: value || ''\n        },\n        annotations: [External.of(true)]\n      });\n    }\n  }, [value, view]);\n  return {\n    state: state,\n    setState: setState,\n    view: view,\n    setView: setView,\n    container: container,\n    setContainer: setContainer\n  };\n}","map":{"version":3,"names":["useEffect","useState","Annotation","EditorState","StateEffect","EditorView","getDefaultExtensions","getStatistics","External","define","useCodeMirror","props","value","selection","onChange","onStatistics","onCreateEditor","onUpdate","_props$extensions","extensions","autoFocus","_props$theme","theme","_props$height","height","_props$minHeight","minHeight","_props$maxHeight","maxHeight","_props$placeholder","placeholder","placeholderStr","_props$width","width","_props$minWidth","minWidth","_props$maxWidth","maxWidth","_props$editable","editable","_props$readOnly","readOnly","_props$indentWithTab","indentWithTab","defaultIndentWithTab","_props$basicSetup","basicSetup","defaultBasicSetup","root","initialState","_useState","_useState2","_slicedToArray","container","setContainer","_useState3","_useState4","view","setView","_useState5","_useState6","state","setState","defaultThemeOption","updateListener","of","vu","docChanged","transactions","some","tr","annotation","doc","_value","toString","defaultExtensions","getExtensions","concat","_toConsumableArray","push","config","stateCurrent","fromJSON","json","fields","create","viewCurrent","parent","undefined","destroy","focus","dispatch","effects","reconfigure","currentValue","changes","from","to","length","insert","annotations"],"sources":["/Users/adityapethe/Developer/ui-chat/ui-chat/client/node_modules/@uiw/react-codemirror/esm/useCodeMirror.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Annotation, EditorState, StateEffect } from '@codemirror/state';\nimport { EditorView } from '@codemirror/view';\nimport { getDefaultExtensions } from './getDefaultExtensions';\nimport { getStatistics } from './utils';\nvar External = Annotation.define();\nexport function useCodeMirror(props) {\n  var {\n    value,\n    selection,\n    onChange,\n    onStatistics,\n    onCreateEditor,\n    onUpdate,\n    extensions = [],\n    autoFocus,\n    theme = 'light',\n    height = '',\n    minHeight = '',\n    maxHeight = '',\n    placeholder: placeholderStr = '',\n    width = '',\n    minWidth = '',\n    maxWidth = '',\n    editable = true,\n    readOnly = false,\n    indentWithTab: defaultIndentWithTab = true,\n    basicSetup: defaultBasicSetup = true,\n    root,\n    initialState\n  } = props;\n  var [container, setContainer] = useState();\n  var [view, setView] = useState();\n  var [state, setState] = useState();\n  var defaultThemeOption = EditorView.theme({\n    '&': {\n      height,\n      minHeight,\n      maxHeight,\n      width,\n      minWidth,\n      maxWidth\n    }\n  });\n  var updateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof onChange === 'function' &&\n    // Fix echoing of the remote changes:\n    // If transaction is market as remote we don't have to call `onChange` handler again\n    !vu.transactions.some(tr => tr.annotation(External))) {\n      var doc = vu.state.doc;\n      var _value = doc.toString();\n      onChange(_value, vu);\n    }\n    onStatistics && onStatistics(getStatistics(vu));\n  });\n  var defaultExtensions = getDefaultExtensions({\n    theme,\n    editable,\n    readOnly,\n    placeholder: placeholderStr,\n    indentWithTab: defaultIndentWithTab,\n    basicSetup: defaultBasicSetup\n  });\n  var getExtensions = [updateListener, defaultThemeOption, ...defaultExtensions];\n  if (onUpdate && typeof onUpdate === 'function') {\n    getExtensions.push(EditorView.updateListener.of(onUpdate));\n  }\n  getExtensions = getExtensions.concat(extensions);\n  useEffect(() => {\n    if (container && !state) {\n      var config = {\n        doc: value,\n        selection,\n        extensions: getExtensions\n      };\n      var stateCurrent = initialState ? EditorState.fromJSON(initialState.json, config, initialState.fields) : EditorState.create(config);\n      setState(stateCurrent);\n      if (!view) {\n        var viewCurrent = new EditorView({\n          state: stateCurrent,\n          parent: container,\n          root\n        });\n        setView(viewCurrent);\n        onCreateEditor && onCreateEditor(viewCurrent, stateCurrent);\n      }\n    }\n    return () => {\n      if (view) {\n        setState(undefined);\n        setView(undefined);\n      }\n    };\n  }, [container, state]);\n  useEffect(() => setContainer(props.container), [props.container]);\n  useEffect(() => () => {\n    if (view) {\n      view.destroy();\n      setView(undefined);\n    }\n  }, [view]);\n  useEffect(() => {\n    if (autoFocus && view) {\n      view.focus();\n    }\n  }, [autoFocus, view]);\n  useEffect(() => {\n    if (view) {\n      view.dispatch({\n        effects: StateEffect.reconfigure.of(getExtensions)\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [theme, extensions, height, minHeight, maxHeight, width, minWidth, maxWidth, placeholderStr, editable, readOnly, defaultIndentWithTab, defaultBasicSetup, onChange, onUpdate]);\n  useEffect(() => {\n    if (value === undefined) {\n      return;\n    }\n    var currentValue = view ? view.state.doc.toString() : '';\n    if (view && value !== currentValue) {\n      view.dispatch({\n        changes: {\n          from: 0,\n          to: currentValue.length,\n          insert: value || ''\n        },\n        annotations: [External.of(true)]\n      });\n    }\n  }, [value, view]);\n  return {\n    state,\n    setState,\n    view,\n    setView,\n    container,\n    setContainer\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}