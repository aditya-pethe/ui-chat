{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { Annotation, EditorState, StateEffect } from '@codemirror/state';\nimport { EditorView } from '@codemirror/view';\nimport { getDefaultExtensions } from './getDefaultExtensions';\nimport { getStatistics } from './utils';\nvar External = Annotation.define();\nexport function useCodeMirror(props) {\n  var {\n    value,\n    selection,\n    onChange,\n    onStatistics,\n    onCreateEditor,\n    onUpdate,\n    extensions = [],\n    autoFocus,\n    theme = 'light',\n    height = '',\n    minHeight = '',\n    maxHeight = '',\n    placeholder: placeholderStr = '',\n    width = '',\n    minWidth = '',\n    maxWidth = '',\n    editable = true,\n    readOnly = false,\n    indentWithTab: defaultIndentWithTab = true,\n    basicSetup: defaultBasicSetup = true,\n    root,\n    initialState\n  } = props;\n  var [container, setContainer] = useState();\n  var [view, setView] = useState();\n  var [state, setState] = useState();\n  var defaultThemeOption = EditorView.theme({\n    '&': {\n      height,\n      minHeight,\n      maxHeight,\n      width,\n      minWidth,\n      maxWidth\n    }\n  });\n  var updateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof onChange === 'function' &&\n    // Fix echoing of the remote changes:\n    // If transaction is market as remote we don't have to call `onChange` handler again\n    !vu.transactions.some(tr => tr.annotation(External))) {\n      var doc = vu.state.doc;\n      var _value = doc.toString();\n      onChange(_value, vu);\n    }\n    onStatistics && onStatistics(getStatistics(vu));\n  });\n  var defaultExtensions = getDefaultExtensions({\n    theme,\n    editable,\n    readOnly,\n    placeholder: placeholderStr,\n    indentWithTab: defaultIndentWithTab,\n    basicSetup: defaultBasicSetup\n  });\n  var getExtensions = [updateListener, defaultThemeOption, ...defaultExtensions];\n  if (onUpdate && typeof onUpdate === 'function') {\n    getExtensions.push(EditorView.updateListener.of(onUpdate));\n  }\n  getExtensions = getExtensions.concat(extensions);\n  useEffect(() => {\n    if (container && !state) {\n      var config = {\n        doc: value,\n        selection,\n        extensions: getExtensions\n      };\n      var stateCurrent = initialState ? EditorState.fromJSON(initialState.json, config, initialState.fields) : EditorState.create(config);\n      setState(stateCurrent);\n      if (!view) {\n        var viewCurrent = new EditorView({\n          state: stateCurrent,\n          parent: container,\n          root\n        });\n        setView(viewCurrent);\n        onCreateEditor && onCreateEditor(viewCurrent, stateCurrent);\n      }\n    }\n    return () => {\n      if (view) {\n        setState(undefined);\n        setView(undefined);\n      }\n    };\n  }, [container, state]);\n  useEffect(() => setContainer(props.container), [props.container]);\n  useEffect(() => () => {\n    if (view) {\n      view.destroy();\n      setView(undefined);\n    }\n  }, [view]);\n  useEffect(() => {\n    if (autoFocus && view) {\n      view.focus();\n    }\n  }, [autoFocus, view]);\n  useEffect(() => {\n    if (view) {\n      view.dispatch({\n        effects: StateEffect.reconfigure.of(getExtensions)\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [theme, extensions, height, minHeight, maxHeight, width, minWidth, maxWidth, placeholderStr, editable, readOnly, defaultIndentWithTab, defaultBasicSetup, onChange, onUpdate]);\n  useEffect(() => {\n    if (value === undefined) {\n      return;\n    }\n    var currentValue = view ? view.state.doc.toString() : '';\n    if (view && value !== currentValue) {\n      view.dispatch({\n        changes: {\n          from: 0,\n          to: currentValue.length,\n          insert: value || ''\n        },\n        annotations: [External.of(true)]\n      });\n    }\n  }, [value, view]);\n  return {\n    state,\n    setState,\n    view,\n    setView,\n    container,\n    setContainer\n  };\n}","map":{"version":3,"names":["useEffect","useState","Annotation","EditorState","StateEffect","EditorView","getDefaultExtensions","getStatistics","External","define","useCodeMirror","props","value","selection","onChange","onStatistics","onCreateEditor","onUpdate","extensions","autoFocus","theme","height","minHeight","maxHeight","placeholder","placeholderStr","width","minWidth","maxWidth","editable","readOnly","indentWithTab","defaultIndentWithTab","basicSetup","defaultBasicSetup","root","initialState","container","setContainer","view","setView","state","setState","defaultThemeOption","updateListener","of","vu","docChanged","transactions","some","tr","annotation","doc","_value","toString","defaultExtensions","getExtensions","push","concat","config","stateCurrent","fromJSON","json","fields","create","viewCurrent","parent","undefined","destroy","focus","dispatch","effects","reconfigure","currentValue","changes","from","to","length","insert","annotations"],"sources":["/Users/adityapethe/Developer/ui-chat/ui-chat/client/node_modules/@uiw/react-codemirror/esm/useCodeMirror.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Annotation, EditorState, StateEffect } from '@codemirror/state';\nimport { EditorView } from '@codemirror/view';\nimport { getDefaultExtensions } from './getDefaultExtensions';\nimport { getStatistics } from './utils';\nvar External = Annotation.define();\nexport function useCodeMirror(props) {\n  var {\n    value,\n    selection,\n    onChange,\n    onStatistics,\n    onCreateEditor,\n    onUpdate,\n    extensions = [],\n    autoFocus,\n    theme = 'light',\n    height = '',\n    minHeight = '',\n    maxHeight = '',\n    placeholder: placeholderStr = '',\n    width = '',\n    minWidth = '',\n    maxWidth = '',\n    editable = true,\n    readOnly = false,\n    indentWithTab: defaultIndentWithTab = true,\n    basicSetup: defaultBasicSetup = true,\n    root,\n    initialState\n  } = props;\n  var [container, setContainer] = useState();\n  var [view, setView] = useState();\n  var [state, setState] = useState();\n  var defaultThemeOption = EditorView.theme({\n    '&': {\n      height,\n      minHeight,\n      maxHeight,\n      width,\n      minWidth,\n      maxWidth\n    }\n  });\n  var updateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof onChange === 'function' &&\n    // Fix echoing of the remote changes:\n    // If transaction is market as remote we don't have to call `onChange` handler again\n    !vu.transactions.some(tr => tr.annotation(External))) {\n      var doc = vu.state.doc;\n      var _value = doc.toString();\n      onChange(_value, vu);\n    }\n    onStatistics && onStatistics(getStatistics(vu));\n  });\n  var defaultExtensions = getDefaultExtensions({\n    theme,\n    editable,\n    readOnly,\n    placeholder: placeholderStr,\n    indentWithTab: defaultIndentWithTab,\n    basicSetup: defaultBasicSetup\n  });\n  var getExtensions = [updateListener, defaultThemeOption, ...defaultExtensions];\n  if (onUpdate && typeof onUpdate === 'function') {\n    getExtensions.push(EditorView.updateListener.of(onUpdate));\n  }\n  getExtensions = getExtensions.concat(extensions);\n  useEffect(() => {\n    if (container && !state) {\n      var config = {\n        doc: value,\n        selection,\n        extensions: getExtensions\n      };\n      var stateCurrent = initialState ? EditorState.fromJSON(initialState.json, config, initialState.fields) : EditorState.create(config);\n      setState(stateCurrent);\n      if (!view) {\n        var viewCurrent = new EditorView({\n          state: stateCurrent,\n          parent: container,\n          root\n        });\n        setView(viewCurrent);\n        onCreateEditor && onCreateEditor(viewCurrent, stateCurrent);\n      }\n    }\n    return () => {\n      if (view) {\n        setState(undefined);\n        setView(undefined);\n      }\n    };\n  }, [container, state]);\n  useEffect(() => setContainer(props.container), [props.container]);\n  useEffect(() => () => {\n    if (view) {\n      view.destroy();\n      setView(undefined);\n    }\n  }, [view]);\n  useEffect(() => {\n    if (autoFocus && view) {\n      view.focus();\n    }\n  }, [autoFocus, view]);\n  useEffect(() => {\n    if (view) {\n      view.dispatch({\n        effects: StateEffect.reconfigure.of(getExtensions)\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [theme, extensions, height, minHeight, maxHeight, width, minWidth, maxWidth, placeholderStr, editable, readOnly, defaultIndentWithTab, defaultBasicSetup, onChange, onUpdate]);\n  useEffect(() => {\n    if (value === undefined) {\n      return;\n    }\n    var currentValue = view ? view.state.doc.toString() : '';\n    if (view && value !== currentValue) {\n      view.dispatch({\n        changes: {\n          from: 0,\n          to: currentValue.length,\n          insert: value || ''\n        },\n        annotations: [External.of(true)]\n      });\n    }\n  }, [value, view]);\n  return {\n    state,\n    setState,\n    view,\n    setView,\n    container,\n    setContainer\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}